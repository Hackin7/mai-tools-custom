(()=>{"use strict";!function(e){const t=/music_(\w+)_score_back/,n=6e4*(540+(new Date).getTimezoneOffset());function a(e,t){return t=t||2,e.toString().padStart(t,"0")}function r(e){return e.getFullYear()+"-"+a(e.getMonth()+1)+"-"+a(e.getDate())+" "+a(e.getHours())+"-"+a(e.getMinutes())}function o(a){if(a.getElementsByTagName("a").length)return;const o=a.querySelector("img.w_430"),c=e.createElement("a");c.download=function(e){const a=function(e){const t=e.getElementsByClassName("block_info")[0].innerText.match(/(\d+)\/(\d+)\/(\d+) (\d+):(\d+)/),a=new Date(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]),parseInt(t[4]),parseInt(t[5]));return new Date(a.valueOf()-n)}(e),o=e.getElementsByClassName("black_block")[0].innerText.replace(/<>:"\/\\\|\?\*/g,"-"),c=e.className.match(t);return c?`${r(a)} ${o} ${c[1].toUpperCase()}.jpg`:`${r(a)} ${o}.jpg`}(a),c.href=o.src,o.insertAdjacentElement("beforebegin",c),c.append(o)}!function(){document.body.oncontextmenu=null;const t=Array.from(e.getElementsByClassName("black_block")).map((e=>e.parentElement));for(const e of t)o(e)}()}(document)})();