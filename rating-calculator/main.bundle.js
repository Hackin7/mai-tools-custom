(()=>{"use strict";var e={745:(e,t,n)=>{var a=n(1533);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},5666:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleArray=void 0,t.shuffleArray=function(e){const t=e.slice(),n=t.length;for(let e=0;e<n;e++){const a=t[e],r=Math.floor(Math.random()*n);t[e]=t[r],t[r]=a}return t}},8379:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SSSPLUS_MIN_ACHIEVEMENT=t.DIFFICULTY_CLASSNAME_MAP=t.DIFFICULTIES=void 0,t.DIFFICULTIES=["BASIC","ADVANCED","EXPERT","MASTER","Re:MASTER"],t.DIFFICULTY_CLASSNAME_MAP=new Map([["Re:MASTER","remaster"],["MASTER","master"],["EXPERT","expert"],["ADVANCED","advanced"]]),t.SSSPLUS_MIN_ACHIEVEMENT=100.5},2347:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlayerGrade=t.getPlayerName=t.getChartType=t.getChartDifficulty=t.getChartLevel=t.getSongName=void 0;const a=n(472);t.getSongName=function(e){return(0,a.normalizeSongName)(e.getElementsByClassName("music_name_block")[0].innerText)},t.getChartLevel=function(e){return e.getElementsByClassName("music_lv_block")[0].innerText},t.getChartDifficulty=function(e){if(!e.classList.contains("pointer")){const t=e.querySelector(".pointer");e=t||e}const t=e.className.match(/music_([a-z]+)_score_back/)[1].toUpperCase();return 0===t.indexOf("RE")?"Re:MASTER":t},t.getChartType=function(e){return e.id?e.id.includes("sta_")?0:1:e.querySelector("img:nth-child(2)").src.includes("_standard")?0:1},t.getPlayerName=function(e){var t,n;return e.className.includes("friend_vs_friend_block")?null===(t=e.querySelector(".t_l"))||void 0===t?void 0:t.innerText:null===(n=e.querySelector(".name_block"))||void 0===n?void 0:n.innerText},t.getPlayerGrade=function(e){const t=e.querySelector(".user_data_block_line ~ img.h_25");if(t){const e=t.src.lastIndexOf("grade_");return t.src.substring(e+6,e+8)}return null}},6510:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchScores=t.SELF_SCORE_URLS=void 0;const r=n(2347),o=n(6420);t.SELF_SCORE_URLS={"Re:MASTER":"/maimai-mobile/record/musicGenre/search/?genre=99&diff=4",MASTER:"/maimai-mobile/record/musicGenre/search/?genre=99&diff=3",EXPERT:"/maimai-mobile/record/musicGenre/search/?genre=99&diff=2",ADVANCED:"/maimai-mobile/record/musicGenre/search/?genre=99&diff=1"},t.fetchScores=function(e,n){return a(this,void 0,void 0,(function*(){const a=t.SELF_SCORE_URLS[e];if(!a)return;const i=yield(0,o.fetchPage)(a),l=i.querySelectorAll(".main_wrapper.t_c .m_15"),s={genre:"",scoreList:n};return l.forEach((t=>function(e,t,n){const a=e.classList.contains("screw_block"),o=e.classList.contains("w_450")&&e.classList.contains("m_15")&&e.classList.contains("p_r")&&e.classList.contains("f_0");if(a)n.genre=e.innerText;else if(o){const a=(0,r.getSongName)(e),o=(0,r.getChartLevel)(e),i=1===(0,r.getChartType)(e)?"DX":"STANDARD",l=function(e){const t=e.querySelector(".music_score_block.w_120");return t&&t.innerText}(e);if(!l)return;n.scoreList.push([a,n.genre,t,o,i,l].join("\t"))}}(t,e,s))),i}))}},134:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionName=t.validateGameVersion=t.RATING_CALCULATOR_SUPPORTED_VERSIONS=void 0;const n=["maimai","maimai PLUS","GreeN","GreeN PLUS","ORANGE","ORANGE PLUS","PiNK","PiNK PLUS","MURASAKi","MURASAKi PLUS","MiLK","MiLK PLUS","FiNALE","maimaiでらっくす","maimaiでらっくす PLUS","Splash","Splash PLUS","UNiVERSE","UNiVERSE PLUS","FESTiVAL"];t.RATING_CALCULATOR_SUPPORTED_VERSIONS=[15,16,17,18,19],t.validateGameVersion=function(e,n=18){const a="string"==typeof e?parseInt(e):e;return!e||isNaN(a)?n:a>=t.RATING_CALCULATOR_SUPPORTED_VERSIONS[0]&&a<=t.RATING_CALCULATOR_SUPPORTED_VERSIONS[t.RATING_CALCULATOR_SUPPORTED_VERSIONS.length-1]?a:n},t.getVersionName=function(e){return n[e]}},5215:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useLanguage=t.LangContext=void 0;const a=n(7363),r=n(8080);t.LangContext=(0,a.createContext)((0,r.getInitialLanguage)()),t.useLanguage=function(){return(0,a.useContext)(t.LangContext)}},8080:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialLanguage=t.saveLanguage=t.SUPPORTED_LANGUAGES=void 0,t.SUPPORTED_LANGUAGES=["en_US","zh_TW"];const n="MaiToolsLang";t.saveLanguage=function(e){window.localStorage.setItem(n,e)},t.getInitialLanguage=function(){const e=new URLSearchParams(location.search);if(e.get("hl"))return e.get("hl").startsWith("zh")?"zh_TW":"en_US";return function(){switch(window.localStorage.getItem(n)){case"en_US":return"en_US";case"zh_TW":return"zh_TW"}return null}()||(navigator.language.startsWith("zh")?"zh_TW":"en_US")}},9268:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLevel=t.getOfficialLevel=void 0,t.getOfficialLevel=function(e){const t=Math.floor(e);return e-t>.6?t+"+":t.toString()},t.getDefaultLevel=function(e){if(!e)return 1;const t=parseInt(e);return e.endsWith("+")?t+.7:t}},6685:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.iWantSomeMagic=void 0;const a={15:[105,117,117,113,116,59,48,48,116,104,106,110,102,115,98,47,104,106,117,105,118,99,47,106,112,48,110,98,106,96,83,98,117,106,111,104,66,111,98,109,122,123,102,115,48,116,100,115,106,113,117,116,96,110,98,106,110,98,106,48,110,98,106,101,121,96,106,111,96,109,119,96,116,113,109,98,116,105,47,107,116],16:[105,117,117,113,116,59,48,48,116,104,106,110,102,115,98,47,104,106,117,105,118,99,47,106,112,48,110,98,106,96,83,98,117,106,111,104,66,111,98,109,122,123,102,115,48,116,100,115,106,113,117,116,96,110,98,106,110,98,106,48,110,98,106,101,121,96,106,111,96,109,119,96,116,113,109,98,116,105,113,109,118,116,47,107,116],17:[105,117,117,113,116,59,48,48,116,104,106,110,102,115,98,47,104,106,117,105,118,99,47,106,112,48,110,98,106,96,83,98,117,106,111,104,66,111,98,109,122,123,102,115,48,116,100,115,106,113,117,116,96,110,98,106,110,98,106,48,110,98,106,101,121,96,106,111,96,109,119,96,118,111,106,119,102,115,116,102,47,107,116],18:[105,117,117,113,116,59,48,48,104,106,116,117,47,104,106,117,105,118,99,118,116,102,115,100,112,111,117,102,111,117,47,100,112,110,48,110,122,107,106,98,111,48,102,102,54,55,58,101,56,53,103,53,51,51,101,53,102,51,54,54,49,55,54,101,57,99,49,51,102,98,51,58,53,98,48,115,98,120,48,58,52,51,103,99,49,52,98,52,57,50,51,50,51,50,49,49,57,49,101,55,103,54,52,56,58,50,52,98,49,57,53,51,53,56,102,54,52,50,100,48,110,98,106,101,121,96,106,111,96,109,119,96,118,111,106,119,102,115,116,102,113,109,118,116,47,107,116],19:[105,117,117,113,116,59,48,48,116,104,106,110,102,115,98,47,104,106,117,105,118,99,47,106,112,48,110,98,106,96,83,98,117,106,111,104,66,111,98,109,122,123,102,115,48,116,100,115,106,113,117,116,96,110,98,106,110,98,106,48,110,98,106,101,121,96,106,111,96,109,119,96,103,102,116,117,106,119,98,109,47,107,116]};t.iWantSomeMagic=function(e){return n(this,void 0,void 0,(function*(){const t=(a[e]||a[18]).map((e=>e-1)),n=yield fetch(String.fromCharCode(...t));return yield n.text()}))}},6358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatFloat=t.roundFloat=t.sum=t.compareNumber=void 0,t.compareNumber=function(e,t){return e>t?1:e<t?-1:0},t.sum=function(e){let t=0;for(const n of e)t+=n;return t},t.roundFloat=function(e,t,n){return Math[t](e/n)*n},t.formatFloat=function(e,t){return e?e.toFixed(t):"0"}},7991:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFinaleRankTitle=t.getRankTitle=t.getRankByAchievement=t.getRankIndexByAchievement=t.getRankDefinitions=void 0;const n=[{minAchv:100.5,factor:14,title:"SSS+"},{minAchv:100,factor:13.5,title:"SSS"},{minAchv:99.5,factor:13.2,title:"SS+"},{minAchv:99,factor:13,title:"SS"},{minAchv:98,factor:12.7,title:"S+"},{minAchv:97,factor:12.5,title:"S"},{minAchv:94,factor:10.5,title:"AAA"},{minAchv:90,factor:9.5,title:"AA"},{minAchv:80,factor:8.5,title:"A"},{minAchv:75,factor:7.5,title:"BBB"},{minAchv:70,factor:7,title:"BB"},{minAchv:60,factor:6,title:"B"},{minAchv:50,factor:5,title:"C"}],a=[{minAchv:100.5,factor:22.4,title:"SSS+"},{minAchv:100,factor:21.6,title:"SSS"},{minAchv:99.5,factor:21.1,title:"SS+"},{minAchv:99,factor:20.8,title:"SS"},{minAchv:98,factor:20.3,title:"S+"},{minAchv:97,factor:20,title:"S"},{minAchv:94,factor:16.8,title:"AAA"},{minAchv:90,factor:15.2,title:"AA"},{minAchv:80,factor:13.6,title:"A"},{minAchv:75,factor:12,title:"BBB"},{minAchv:70,factor:11.2,title:"BB"},{minAchv:60,factor:9.6,title:"B"},{minAchv:50,factor:8,title:"C"}];function r(e){return e>15?a:n}function o(e){return a.findIndex((t=>e>=t.minAchv))}function i(e){const t=o(e);return t<0?"D":a[t].title}t.getRankDefinitions=r,t.getRankIndexByAchievement=o,t.getRankByAchievement=function(e,t){const n=o(e);return n<0?null:r(t)[n]},t.getRankTitle=i,t.getFinaleRankTitle=function(e){return i(e).replace("SSS+","SSS")}},472:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isNicoNicoLink=t.getSongNickname=t.getSongIdx=t.normalizeSongName=t.RATING_TARGET_SONG_NAME_PREFIX=t.DX_SONG_NAME_SUFFIX=void 0;const r=n(6420);t.DX_SONG_NAME_SUFFIX=" [DX]",t.RATING_TARGET_SONG_NAME_PREFIX="▶ ",t.normalizeSongName=function(e){return"D✪N’T  ST✪P  R✪CKIN’"===e?"D✪N’T ST✪P R✪CKIN’":e.replace(/" \+ '/g,"").replace(/' \+ "/g,"")},t.getSongIdx=function(e){return e.getElementsByTagName("form")[0].elements.namedItem("idx").value},t.getSongNickname=function(e,n,a){return"Link"===e&&(e=n.includes("niconico")?"Link(nico)":"Link(org)"),1===a?e+t.DX_SONG_NAME_SUFFIX:e};let o={};t.isNicoNicoLink=function(e){return a(this,void 0,void 0,(function*(){if(o.nico===e)return!0;if(o.original===e)return!1;const t=(yield(0,r.fetchPage)("/maimai-mobile/record/musicDetail/?"+new URLSearchParams([["idx",e]]).toString())).body.querySelector(".m_10.m_t_5.t_r.f_12").innerText.includes("niconico");return console.log("Link (idx: "+e+") "+(t?"is niconico":"is original")),t?o.nico=e:o.original=e,t}))}},87:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSongsByVersion=t.filterSongsByVersion=t.getSongProperties=t.buildSongPropsMap=void 0;const a=n(8379),r=n(472),o=/\bdx\s*:\s*([0-9]+)/,i=/\blv\s*:\s*(\[.+?\])/,l=/\bv\s*:\s*(-?[0-9]+)/,s=/\bn\s*:\s*["'](.+?)['"]\s*[,\}]/,c=/\bnn\s*:\s*["'](.+?)['"]\s*[,\}]/,u=[{dx:1,debut:16,lv:[5,8.2,12.2,14.4,0],name:"宿星審判"}];function d(e){const t=e.match(o),n=e.match(i),u=e.match(l),d=e.match(s),f=e.match(c);if(t&&n&&u&&d){let e=JSON.parse(n[1]);if(e.length>a.DIFFICULTIES.length){const t=e.pop();e[a.DIFFICULTIES.length-1]=t}return{dx:parseInt(t[1]),lv:e,debut:Math.abs(parseInt(u[1])),name:(0,r.normalizeSongName)(d[1]),nickname:f&&f[1]}}}function f(e,t){e.has(t.name)||e.set(t.name,[]);const n=e.get(t.name),a=n.findIndex((e=>t.dx===e.dx));a>=0?n[a]=t:n.push(t)}t.buildSongPropsMap=function(e){const t=e.split("\n"),n=new Map;for(const e of t){const t=d(e);t&&f(n,t)}for(const e of u)f(n,e);return n},t.getSongProperties=function(e,t,n,a){let o=e.get(t);if(o&&o.length>0){if(o.length>1&&(o=o.filter((e=>e.dx===a)),o.length>1)){const e=(0,r.getSongNickname)(t,n,a);o=o.filter((t=>t.nickname===e))}if(o.length)return o.length>1&&(console.warn(`Found multiple song properties for ${t} ${a}`),console.warn(o)),o[0]}console.warn(`Could not find song properties for ${t} ${a}`)},t.filterSongsByVersion=function(e,t,n,a){const r=[];for(const o of e){const{dx:e,name:i,nickname:l}=o;let s=t.get(i);s&&s.length>0&&(s.length>1&&(s=s.filter((t=>t.dx===e)),s.length>1&&(s=s.filter((e=>e.nickname===l)))),s.length)?(s.length>1&&(console.warn(`Found multiple song properties for ${i} ${e?"[DX]":""}`),console.warn(s)),(0===a&&s[0].debut===n||1===a&&s[0].debut<n)&&r.push(s[0])):console.warn(`Could not find song properties for ${i} ${e?"[DX]":""}`)}return r},t.getSongsByVersion=function(e,t){const n=[];return e.forEach((e=>e.forEach((e=>{e.debut===t&&n.push(e)})))),n}},6420:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getPostMessageFunc=t.fetchNewSongs=t.fetchAllSongs=t.fetchGameVersion=t.fetchPage=t.handleError=t.ALLOWED_ORIGINS=void 0;const r=n(2347),o=n(6510),i=n(472);function l(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(e),n=yield t.text();return(new DOMParser).parseFromString(n,"text/html")}))}function s(e){return a(this,void 0,void 0,(function*(){const t=Array.from(e.querySelectorAll(".w_450.m_15.f_0")),n=[];for(const e of t){const t=(0,i.getSongIdx)(e),a=(0,r.getSongName)(e),o=(0,r.getChartType)(e);let l;"Link"===a&&(l=(yield(0,i.isNicoNicoLink)(t))?"Link(nico)":"Link(org)"),n.push({dx:o,name:a,nickname:l})}return n}))}t.ALLOWED_ORIGINS=["https://cdpn.io","https://myjian.github.io","http://localhost:8080"],t.handleError=function(e){alert(e)},t.fetchPage=l,t.fetchGameVersion=function e(t){return a(this,void 0,void 0,(function*(){const n=t.querySelector("select[name=version] option:last-of-type");return n?parseInt(n.value):e(t=yield l("/maimai-mobile/record/musicVersion/"))}))},t.fetchAllSongs=function(e){return a(this,void 0,void 0,(function*(){if(!e){const t=o.SELF_SCORE_URLS.MASTER;e=yield l(t)}return yield s(e)}))},t.fetchNewSongs=function(e){return a(this,void 0,void 0,(function*(){const t=yield l(`/maimai-mobile/record/musicVersion/search/?version=${e}&diff=0`);return yield s(t)}))},t.getPostMessageFunc=function(e,t){return(n,a)=>{const r={action:n,payload:a};e.postMessage(r,t)}}},7627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getZhWikiLink=void 0,t.getZhWikiLink=function(e){return"https://maimai.fandom.com/zh/wiki/"+encodeURIComponent(e)+"?variant=zh-hant"}},2411:(e,t)=>{function n(e){return"dxLv"+e}Object.defineProperty(t,"__esModule",{value:!0}),t.writeToCache=t.readFromCache=void 0,t.readFromCache=function(e){const t=n(e),a=window.localStorage.getItem(t);if(console.log('Reading cache for "'+t+'" =>',a),!a)return null;const r=JSON.parse(a),o=new Date(r.date);return(new Date).valueOf()-o.valueOf()>864e5?(console.warn('Cache for "'+t+'" is expired.'),window.localStorage.clear(),null):r.content},t.writeToCache=function(e,t){const a=n(e);console.log('Updating cache for "'+a+'"');const r={date:new Date,content:t};window.localStorage.setItem(a,JSON.stringify(r))}},3324:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNotPlayedCharts=t.getCandidateCharts=void 0;const a=n(5666),r=n(8379),o=n(7991),i=n(472),l=n(7284),s=n(8505);function c(e,t,n,a){let r=(0,o.getRankIndexByAchievement)(t.achievement);-1===r&&(r=(0,o.getRankIndexByAchievement)(94));const i=(0,o.getRankDefinitions)(e),s=new Map;for(let o=r-1;o>=0;o--){const r=i[o];if(r.title===i[o+1].title)continue;const[c]=(0,l.calculateRatingRange)(e,t.level,r);if(c>n&&(s.set(r.title,{minRt:c-n,rank:r}),s.size>=a))break}return s}t.getCandidateCharts=function(e,t,n,a){const o=[];if(n<=0)return o;for(let a=0;a<n;a++){const n=t[a];if(n.achievement<r.SSSPLUS_MIN_ACHIEVEMENT){const t=c(e,n,Math.floor(n.rating),2);if(!t.size)continue;n.nextRanks=t,o.push(n)}}const i=Math.floor(t[n-1].rating);for(let l=n;l<t.length;l++){const n=t[l];if(n.achievement<r.SSSPLUS_MIN_ACHIEVEMENT){const t=c(e,n,i,2);if(!t.size)continue;if(n.nextRanks=t,o.push(n),o.length>=a)break}}return o.sort(s.compareCandidate),o},t.getNotPlayedCharts=function(e,t,n,l,u){const d=new Set;for(const e of n){const t=(0,i.getSongNickname)(e.songName,e.genre,e.chartType);d.add(t+e.difficulty)}const f=n.length?Math.ceil(n[0].rating):0,m=n.length?Math.floor(n[l-1].rating):0,g=(0,o.getRankByAchievement)(100.5,e),h=(0,o.getRankByAchievement)(97,e),p=f?100*f/(h.factor*h.minAchv):15,v=100*m/(g.factor*g.minAchv),_=[],C=(0,a.shuffleArray)(t);for(const t of C){for(let n=1;n<t.lv.length;n++){let a=t.lv[n];const o=a<0;a=Math.abs(a);const l="Link"===t.name?t.nickname:(0,i.getSongNickname)(t.name,"",t.dx),s=r.DIFFICULTIES[Math.min(n,r.DIFFICULTIES.length-1)];if(d.has(l+s)||a<v||a>p)continue;const u={songName:t.name,difficulty:s,level:a,levelIsEstimate:o,genre:"",chartType:t.dx,rating:0,achievement:0},f=c(e,u,m,1);f.size&&(u.nextRanks=f,_.push(u))}if(_.length>=u)break}return _.sort(s.compareSongsByLevel),_}},8906:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMessages=void 0,t.CommonMessages={en_US:{subtotal:"Subtotal",difficulty:"Difficulty",level:"Level"},zh_TW:{subtotal:"小計",difficulty:"難度",level:"等級"}}},6741:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CandidateChartRecords=void 0;const i=o(n(7363)),l=n(5215),s=n(8505),c=n(4945),u=n(4961),d=n(7340),f={en_US:{showMore:"Show more",showLess:"Show less"},zh_TW:{showMore:"顯示更多",showLess:"顯示較少"}},m=[0,1,2,3,4,6,8],g=new Map([[1,s.compareSongsByName],[2,s.compareSongsByDifficulty],[3,s.compareSongsByLevel],[4,s.compareSongsByAchv],[6,s.compareSongsByNextRank],[8,s.compareSongsByNextRating]]);t.CandidateChartRecords=({hidden:e,played:t,notPlayed:n,songPropsByName:a,name:r})=>{const[o,s]=(0,i.useState)(!0),[h,p]=(0,i.useState)(!1),[v,_]=(0,i.useState)(),[C,y]=(0,i.useState)(),R=(0,i.useCallback)((e=>{e.preventDefault(),p(!h)}),[h]),S=(0,i.useCallback)((e=>{s(e)}),[o]),b=(0,i.useCallback)((e=>{g.has(e)?e===v?y(!C):(_(e),y(!1)):_(void 0)}),[v,C]),E=!o&&n?n:t,N=h?E.length:Math.min(E.length,20),w=E.slice(0,N).map(((e,t)=>(e.order=t+1,e)));v&&(w.sort(g.get(v)),C&&w.reverse());const P=E.length>20,O=f[(0,l.useLanguage)()];return i.default.createElement(d.CollapsibleContainer,{className:"songRecordTableContainer",hidden:e},n&&i.default.createElement(c.CandidatesPlayedToggle,{name:r,showPlayed:o,toggleShowPlayed:S}),i.default.createElement(u.ChartRecordsTable,{songPropsByName:a,tableClassname:"candidateTable",records:w,sortBy:b,columns:m,isCandidate:!0}),P&&i.default.createElement("a",{className:"showMore",href:"#",onClick:R},h?O.showLess:O.showMore))}},4945:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CandidatesPlayedToggle=void 0;const i=o(n(7363)),l=n(5215),s={en_US:{showPlayed:"Show played charts",showNotPlayed:"Show not yet played charts"},zh_TW:{showPlayed:"顯示已玩過的譜面",showNotPlayed:"顯示未玩過的譜面"}};t.CandidatesPlayedToggle=({name:e,showPlayed:t,toggleShowPlayed:n})=>{const a=(0,i.useCallback)((()=>{n(!t)}),[n]),r=s[(0,l.useLanguage)()];return i.default.createElement("div",{className:"w90"},i.default.createElement("form",{className:"playedToggleForm"},i.default.createElement("label",{className:"radioLabel"},i.default.createElement("input",{className:"radioInput",name:`showPlayed-${e}`,value:"1",type:"radio",checked:t,onChange:a}),r.showPlayed),i.default.createElement("label",{className:"radioLabel"},i.default.createElement("input",{className:"radioInput",name:`showPlayed-${e}`,value:"0",type:"radio",checked:!t,onChange:a}),r.showNotPlayed)))}},6015:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartRecordDataRow=void 0;const r=a(n(7363)),o=n(8379),i=n(7991),l=n(472),s=n(471);t.ChartRecordDataRow=r.default.memo((e=>{const{record:t,index:n,columns:a,songPropsByName:c,isCandidate:u}=e,d=a.map((e=>{switch(e){case 0:return n;case 1:return function(e,t,n){const a=n&&e.isTarget?l.RATING_TARGET_SONG_NAME_PREFIX:"",r=t.get(e.songName);return r&&r.length>1?a+(0,l.getSongNickname)(e.songName,e.genre,e.chartType):a+e.songName}(t,c,u);case 2:return t.difficulty;case 3:const e=t.level.toFixed(1);return t.levelIsEstimate?"*"+e:e;case 4:return t.achievement.toFixed(4)+"%";case 5:return(0,i.getRankTitle)(t.achievement);case 6:return t.nextRanks?Array.from(t.nextRanks.values()).map((e=>e.rank.minAchv+"%")).join("\n"):"";case 8:return t.nextRanks?Array.from(t.nextRanks.values()).map((e=>"+"+e.minRt.toFixed(0))).join("\n"):"";case 7:return Math.floor(t.rating).toString()}}));return r.default.createElement(s.ChartRecordRow,{className:o.DIFFICULTY_CLASSNAME_MAP.get(t.difficulty),columnValues:d})}))},3401:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartRecordHeadRow=void 0;const r=a(n(7363)),o=n(5215),i=n(8906),l=n(471),s={en_US:{num:"#",song:"Song",rating:"Rating",nextGoal:"Next Goal",nextRating:"+Rating",rank:"Rank",achievementAbbr:"Achv"},zh_TW:{num:"#",song:"歌曲",level:"等級",rating:"R 值",nextGoal:"下個\n目標",nextRating:"R 值\n加分",rank:"Rank",achievementAbbr:"達成率"}};t.ChartRecordHeadRow=r.default.memo((({columns:e,sortBy:t})=>{const n=(0,o.useLanguage)(),a=e.map((e=>function(e,t){const n=s[e];return{0:n.num,1:n.song,2:i.CommonMessages[e].difficulty,3:i.CommonMessages[e].level,4:n.achievementAbbr,5:n.rank,7:n.rating,6:n.nextGoal,8:n.nextRating}[t]}(n,e))),c=t&&(n=>t(e[n]));return r.default.createElement(l.ChartRecordRow,{columnValues:a,onClickCell:c,isHeading:!0})}))},471:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartRecordRow=void 0;const r=a(n(7363)),o=n(472),i=n(7627),l=["orderCell","songTitleCell","difficultyCell","levelCell","achievementCell","rankCell","ratingCell"];class s extends r.default.PureComponent{constructor(){super(...arguments),this.getChildren=(e,t,n)=>{if(!n&&1===t){let t=e;const n=t.startsWith(o.RATING_TARGET_SONG_NAME_PREFIX)?o.RATING_TARGET_SONG_NAME_PREFIX.length:0,a=t.endsWith(o.DX_SONG_NAME_SUFFIX)?t.length-o.DX_SONG_NAME_SUFFIX.length:t.length;return t=t.substring(n,a),r.default.createElement("a",{className:"songWikiLink",href:(0,i.getZhWikiLink)(t),target:"_blank"},e)}return"string"==typeof e&&e.includes("\n")?e.split("\n").map(((e,t)=>r.default.createElement("div",{key:t},e))):e}}render(){const{columnValues:e,isHeading:t,onClickCell:n}=this.props;let a="scoreRecordRow";return this.props.className&&(a+=" "+this.props.className),r.default.createElement("tr",{className:a},e.map(((e,a)=>{let o="scoreRecordCell "+l[a];const i=this.getChildren(e,a,t),s=n?{tabIndex:0,onClick:()=>n(a),onKeyDown:e=>{"Enter"===e.key&&n(a)}}:{};return t?r.default.createElement("th",Object.assign({className:o},s),i):r.default.createElement("td",Object.assign({className:o},s),i)})))}}t.ChartRecordRow=s},191:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartRecordSectionTitle=void 0;const r=a(n(7363));class o extends r.default.PureComponent{constructor(){super(...arguments),this.state={symbolClassName:""},this.handleClick=e=>{e.preventDefault(),this.props.onClick(e)},this.handleKeyPress=e=>{e.preventDefault(),console.log(e.key),console.log(e.keyCode),"Enter"===e.key&&this.props.onClick(e)}}componentDidUpdate(e){e.contentHidden&&!this.props.contentHidden&&(this.setState({symbolClassName:"crSecShow"}),window.setTimeout((()=>{this.setState({symbolClassName:""})}),300))}render(){const{isCandidateList:e,contentHidden:t,title:n}=this.props;let{symbolClassName:a}=this.state;const o=e?"▷":"▶";return a+=" crSecTitleSymbol",t&&(a+=" crSecHidden"),r.default.createElement("h3",{className:"crSecTitleContainer"},r.default.createElement("span",{className:"crSecTitle",tabIndex:0,onClick:this.handleClick,onKeyPress:this.handleKeyPress},r.default.createElement("span",{className:a},o),n))}}t.ChartRecordSectionTitle=o},4961:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartRecordsTable=void 0;const r=a(n(7363)),o=n(6015),i=n(3401);class l extends r.default.PureComponent{render(){const{columns:e,sortBy:t,records:n,songPropsByName:a,isCandidate:l}=this.props;let{tableClassname:s}=this.props;return s+=" songRecordTable",r.default.createElement("table",{className:s},r.default.createElement("thead",null,r.default.createElement(i.ChartRecordHeadRow,{sortBy:t,columns:e})),r.default.createElement("tbody",null,n.map(((t,n)=>(n=t.order||n+1,r.default.createElement(o.ChartRecordDataRow,{songPropsByName:a,record:t,columns:e,index:n,isCandidate:l}))))))}}t.ChartRecordsTable=l},7340:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsibleContainer=void 0;const r=a(n(7363));class o extends r.default.PureComponent{render(){let e="collapsibleContainer";return this.props.className&&(e+=" "+this.props.className),this.props.hidden&&(e+=" hidden"),r.default.createElement("div",{className:e},this.props.children)}}t.CollapsibleContainer=o},2186:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DifficultyDistribution=void 0;const r=a(n(7363)),o=n(8379),i=n(5215),l=n(8906),s=n(6025),c=n(614),u="diffRankCell";t.DifficultyDistribution=({chartRecords:e,topChartsCount:t})=>{const n=(0,i.useLanguage)(),a=function(e){const t=new Map;for(let e=o.DIFFICULTIES.length-1;e>=0;e--)t.set(o.DIFFICULTIES[e],[]);for(const n of e)t.get(n.difficulty).push(n);return t}(e.slice(0,t)),d=new Map([[l.CommonMessages[n].subtotal,!0]]);return r.default.createElement("table",{className:"rankDistributionTable"},r.default.createElement("thead",null,r.default.createElement(c.RankDistributionHeadRow,{firstCell:l.CommonMessages[n].difficulty,baseCellClassname:u,perColumnClassnames:["difficultyRankDistHead"],columns:d.keys()})),r.default.createElement("tbody",null,Array.from(a.entries()).map((([e,t])=>{if(!t.length)return;const a=new Map([[l.CommonMessages[n].subtotal,t.length]]);return r.default.createElement(s.RankDistributionDataRow,{key:e,rowHead:e,columns:d.keys(),rankDist:a,rowClassname:o.DIFFICULTY_CLASSNAME_MAP.get(e),baseCellClassname:u,perColumnClassnames:[]})}))))}},3531:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLvInput=void 0;const i=o(n(7363)),l=n(5215),s={en_US:{internalLvHeading:"Chart Internal Level Data",manualLv:"Manual input",autoLv:"Automatic"},zh_TW:{internalLvHeading:"譜面定數",manualLv:"手動輸入",autoLv:"自動代入"}};t.InternalLvInput=i.default.forwardRef(((e,t)=>{const[n,a]=(0,i.useState)(!1),r=(0,i.useCallback)((e=>{a("1"===e.currentTarget.value)}),[]),o=s[(0,l.useLanguage)()];return i.default.createElement("div",{className:"w90"},i.default.createElement("h2",{className:"lvInputHeading"},o.internalLvHeading),i.default.createElement("form",null,i.default.createElement("label",{className:"radioLabel"},i.default.createElement("input",{className:"radioInput",name:"showLvInput",value:"0",type:"radio",checked:!n,onChange:r}),o.autoLv),i.default.createElement("label",{className:"radioLabel"},i.default.createElement("input",{className:"radioInput",name:"showLvInput",value:"1",type:"radio",checked:n,onChange:r}),o.manualLv)),n&&i.default.createElement("textarea",{className:"lvInput",ref:t}))}))},8169:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageChooser=void 0;const i=o(n(7363)),l=n(8080),s={zh_TW:"繁體中文",en_US:"English"};t.LanguageChooser=({activeLanguage:e,changeLanguage:t})=>{const n=(0,i.useCallback)((e=>{t(e.currentTarget.value)}),[t]);return i.default.createElement("label",null,"介面語言 (Language)：",i.default.createElement("select",{className:"language",onChange:n,value:e},l.SUPPORTED_LANGUAGES.map((e=>{const t=s[e];return i.default.createElement("option",{key:e,value:e},t)}))))}},7247:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LevelRankDistribution=void 0;const r=a(n(7363)),o=n(9268),i=n(6358),l=n(2060),s=n(6025),c=n(614),u="levelRankCell",d=["officialLevelCell"];class f extends r.default.PureComponent{render(){const{chartRecords:e,topLeftCell:t,topChartsCount:n}=this.props,a=e.slice(0,n),f=(0,l.getRankMap)(a),m=function(e){const t=e.map((e=>e.level));t.sort(i.compareNumber),t.reverse();const n=new Map;for(const e of t){const t=(0,o.getOfficialLevel)(e);n.has(t)||n.set(t,[])}for(const t of e)n.get((0,o.getOfficialLevel)(t.level)).push(t);return n}(a);return r.default.createElement("table",{className:"rankDistributionTable"},r.default.createElement("thead",null,r.default.createElement(c.RankDistributionHeadRow,{columns:f.keys(),firstCell:t,baseCellClassname:u,perColumnClassnames:d})),r.default.createElement("tbody",null,Array.from(m.entries()).map((([e,t])=>r.default.createElement(s.RankDistributionDataRow,{key:e,rowHead:e,columns:f.keys(),rankDist:(0,l.getRankDistribution)(t),baseCellClassname:u,perColumnClassnames:d})))))}}t.LevelRankDistribution=f},6014:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OtherTools=void 0;const r=a(n(7363)),o=n(5215),i={en_US:{otherToolsHeading:"Other Tools",ratingVisualizer:"Rating Lookup Table & Visualization",bookmarketList:"maimai Bookmarklets (Features & How to use)",arcadeSongs:"arcade-songs (Chart searching tool) by Raku Zeta",otohime:"Otohime (Personal score tracking) by KOINU",mapDistanceCalc:"Map Distance Calculator (How many credits to a character/collection item) by 魚丸◎蕾娜"},zh_TW:{otherToolsHeading:"其他工具",ratingVisualizer:"單曲 R 值圖表",bookmarketList:"書籤小工具介紹與設定教學",arcadeSongs:"音樂遊戲譜面搜尋工具 arcade-songs (由 Raku Zeta 製作)",otohime:"Otohime - 音 Game 成績單網站 (由 KOINU 製作)",mapDistanceCalc:"ちほー道數計算器 (旅伴 & 收藏品) (由 魚丸◎蕾娜 製作)"}};t.OtherTools=({gameVer:e})=>{const t=i[(0,o.useLanguage)()],n=`../rating-visualizer/?gameVer=${e}`;return r.default.createElement("div",{className:"otherToolsContainer"},r.default.createElement("hr",{className:"sectionSep"}),r.default.createElement("h2",{className:"otherToolsHeading"},t.otherToolsHeading),r.default.createElement("ul",null,r.default.createElement("li",{className:"toolItem"},r.default.createElement("a",{href:n,target:"_blank"},t.ratingVisualizer)),r.default.createElement("li",{className:"toolItem"},r.default.createElement("a",{href:"../bookmarklets/",target:"_blank"},t.bookmarketList)),r.default.createElement("li",{className:"toolItem"},r.default.createElement("a",{href:"https://arcade-songs.zetaraku.dev/",target:"_blank"},t.arcadeSongs)),r.default.createElement("li",{className:"toolItem"},r.default.createElement("a",{href:"https://otohi.me/",target:"_blank"},t.otohime)),r.default.createElement("li",{className:"toolItem"},r.default.createElement("a",{href:"https://renawevin.weebly.com/rw-maimaidxsplash-chiho-calculate.html",target:"_blank"},t.mapDistanceCalc))))}},3462:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageFooter=void 0;const r=a(n(7363));class o extends r.default.PureComponent{render(){return r.default.createElement("footer",null,"Made by"," ",r.default.createElement("a",{className:"authorLink",href:"https://github.com/myjian/"},"myjian"),".")}}t.PageFooter=o},6025:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RankDistributionDataRow=void 0;const r=a(n(7363)),o=n(5950);t.RankDistributionDataRow=r.default.memo((e=>{const t=[e.rowHead];for(const n of e.columns){const a=e.rankDist.get(n);t.push(a||"-")}return r.default.createElement(o.RankDistributionRow,{values:t,rowClassname:e.rowClassname,baseCellClassname:e.baseCellClassname,perColumnClassnames:e.perColumnClassnames})}))},614:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RankDistributionHeadRow=void 0;const r=a(n(7363)),o=n(5950);t.RankDistributionHeadRow=({firstCell:e,columns:t,baseCellClassname:n,perColumnClassnames:a})=>{const i=[e];for(const e of t)i.push(e);return r.default.createElement(o.RankDistributionRow,{values:i,isHeading:!0,baseCellClassname:n,perColumnClassnames:a})}},5950:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RankDistributionRow=void 0;const r=a(n(7363));class o extends r.default.PureComponent{render(){const{values:e,isHeading:t,rowClassname:n,baseCellClassname:a,perColumnClassnames:o}=this.props;return r.default.createElement("tr",{className:n},e.map(((e,n)=>{const i=t||0===n;let l=a;return o[n]&&(l+=" "+o[n]),i?r.default.createElement("th",{className:l},e):r.default.createElement("td",{className:l},e)})))}}t.RankDistributionRow=o},8807:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RatingDetails=void 0;const i=o(n(7363)),l=n(5215),s=n(7258),c=n(6741),u=n(191),d=n(33),f={en_US:{newChartsRatingTargets:"New Charts Rating Subjects (best 15):",oldChartsRatingTargets:"Old Charts Rating Subjects (best {count}):",newChartsRatingCandidates:"New Charts Rating Candidates:",oldChartsRatingCandidates:"Old Charts Rating Candidates:"},zh_TW:{newChartsRatingTargets:"新譜面 Rating 對象曲 (取最佳 15 首)：",oldChartsRatingTargets:"舊譜面 Rating 對象曲 (取最佳 {count} 首)：",newChartsRatingCandidates:"新譜面 Rating 候選曲：",oldChartsRatingCandidates:"舊譜面 Rating 候選曲："}};t.RatingDetails=({gameVer:e,newCandidateCharts:t,notPlayedNewCharts:n,oldCandidateCharts:a,notPlayedOldCharts:r,songPropsByName:o,ratingData:m})=>{const[g,h]=(0,i.useState)(!1),[p,v]=(0,i.useState)(!1),[_,C]=(0,i.useState)(!1),[y,R]=(0,i.useState)(!1),S=(0,i.useCallback)((()=>{h(!g)}),[g]),b=(0,i.useCallback)((()=>{v(!p)}),[p]),E=(0,i.useCallback)((()=>{C(!_)}),[_]),N=(0,i.useCallback)((()=>{R(!y)}),[y]),{newChartRecords:w,newTopChartsCount:P,oldChartRecords:O,oldTopChartsCount:L}=m,M=f[(0,l.useLanguage)()];return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"songRecordsContainer"},i.default.createElement(u.ChartRecordSectionTitle,{title:M.newChartsRatingTargets,contentHidden:g,onClick:S}),i.default.createElement(d.TopChartRecords,{songPropsByName:o,records:w,limit:P,hidden:g})),i.default.createElement("div",{className:"songRecordsContainer"},i.default.createElement(u.ChartRecordSectionTitle,{title:M.oldChartsRatingTargets.replace("{count}",(0,s.getNumOfTopOldCharts)(e).toFixed(0)),contentHidden:p,onClick:b}),i.default.createElement(d.TopChartRecords,{songPropsByName:o,records:O,limit:L,hidden:p})),i.default.createElement("div",{className:"songRecordsContainer"},i.default.createElement(u.ChartRecordSectionTitle,{title:M.newChartsRatingCandidates,contentHidden:_,onClick:E,isCandidateList:!0}),i.default.createElement(c.CandidateChartRecords,{name:"new",songPropsByName:o,hidden:_,played:t,notPlayed:n})),i.default.createElement("div",{className:"songRecordsContainer"},i.default.createElement(u.ChartRecordSectionTitle,{title:M.oldChartsRatingCandidates,contentHidden:y,onClick:N,isCandidateList:!0}),i.default.createElement(c.CandidateChartRecords,{name:"old",songPropsByName:o,hidden:y,played:a,notPlayed:r})))}},2693:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RatingOutput=void 0;const i=o(n(7363)),l=n(5215),s=n(3324),c=n(7258),u=n(7284),d=n(8807),f=n(3505),m=n(2953),g={en_US:{analysisResult:"Analysis Result"},zh_TW:{analysisResult:"分析結果"}};t.RatingOutput=({gameVer:e,newSongs:t,oldSongs:n,ratingData:a,gameRegion:r,playerName:o,playerGradeIndex:h,songPropsByName:p})=>{const v=(0,i.useMemo)((()=>{const{newChartRecords:r,newTopChartsCount:o,oldChartRecords:i,oldTopChartsCount:l}=a,d=(0,s.getCandidateCharts)(e,r,o,100),f=t?(0,s.getNotPlayedCharts)(e,t,r,o,100):[];return{newCandidateCharts:d,oldCandidateCharts:(0,s.getCandidateCharts)(e,i,l,250),notPlayedNewCharts:f,notPlayedOldCharts:n?(0,s.getNotPlayedCharts)(e,n,i,l,250):[],maxNewChartsRating:t?(0,u.calculateMaxRating)(e,t,(0,c.getNumOfTopNewCharts)()):0,maxOldChartsRating:n?(0,u.calculateMaxRating)(e,n,(0,c.getNumOfTopOldCharts)(e)):0}}),[e,t,n,a]),_=(0,i.useRef)();(0,i.useEffect)((()=>{_.current&&_.current.scrollIntoView({behavior:"smooth"})}),[]);const{newChartsRating:C,newTopChartsCount:y,oldChartsRating:R,oldTopChartsCount:S}=a,{newCandidateCharts:b,oldCandidateCharts:E,notPlayedNewCharts:N,notPlayedOldCharts:w,maxNewChartsRating:P,maxOldChartsRating:O}=v,L=g[(0,l.useLanguage)()];return i.default.createElement("div",{className:"outputArea",ref:_},i.default.createElement("h2",{id:"outputHeading"},L.analysisResult,o?` - ${o}`:null),i.default.createElement(f.RatingOverview,{gameVer:e,newChartsRating:C,newChartsMaxRating:P,newTopChartsCount:y,oldChartsRating:R,oldChartsMaxRating:O,oldTopChartsCount:S,playerGradeIndex:e>15?0:h}),i.default.createElement(m.RecommendedLevels,{gameRegion:r,gameVer:e,newChartsRating:C,newTopChartsCount:y,oldChartsRating:R,oldTopChartsCount:S}),i.default.createElement(d.RatingDetails,{gameVer:e,songPropsByName:p,newCandidateCharts:b,oldCandidateCharts:E,notPlayedNewCharts:N,notPlayedOldCharts:w,ratingData:a}),i.default.createElement("hr",{className:"sectionSep"}))}},3505:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RatingOverview=void 0;const i=o(n(7363)),l=n(5215),s=n(5945),c={en_US:{average:"Average",column:":",newChartsRating:"New Charts Rating",oldChartsRating:"Old Charts Rating",grade:"Grade"},zh_TW:{average:"平均",column:"：",newChartsRating:"新譜面 Rating",oldChartsRating:"舊譜面 Rating",grade:"段位"}};function u(e,t){return t?(e/t).toFixed(0):0}t.RatingOverview=({gameVer:e,oldChartsRating:t,oldChartsMaxRating:n,oldTopChartsCount:a,newChartsRating:r,newChartsMaxRating:o,newTopChartsCount:d,playerGradeIndex:f})=>{const[m,g]=(0,i.useState)(),h=(0,i.useCallback)((()=>{g(!m)}),[m]),p=c[(0,l.useLanguage)()];let v=r+t;const _=f>0?(0,s.getGradeByIndex)(f):null;_&&(v+=_.bonus);const C=(0,s.getTopGradeBonus)(e);return i.default.createElement("div",{className:"ratingOverview"},i.default.createElement("div",{className:"totalRatingRow",tabIndex:0,onClick:h},"Rating："," ",i.default.createElement("span",null,m?`${v} / ${o+n+C}`:v)),i.default.createElement("table",{className:"ratingOverviewTable"},i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,p.newChartsRating),i.default.createElement("td",{className:"columnColumn"},p.column),i.default.createElement("td",{className:"subRatingColumn"},m?`${r} / ${o}`:r),i.default.createElement("td",{className:"avgRatingColumn"},"(",p.average,p.column," ",u(r,d),")")),i.default.createElement("tr",null,i.default.createElement("td",null,p.oldChartsRating),i.default.createElement("td",null,p.column),i.default.createElement("td",{className:"subRatingColumn"},m?`${t} / ${n}`:t),i.default.createElement("td",{className:"avgRatingColumn"},"(",p.average,p.column," ",u(t,a),")")),_&&i.default.createElement("tr",null,i.default.createElement("td",null,p.grade," (",i.default.createElement("span",null,_.title),")"),i.default.createElement("td",null,p.column),i.default.createElement("td",{className:"subRatingColumn"},m?`${_.bonus} / ${C}`:_.bonus)))))}},1698:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendedLevelCell=void 0;const r=a(n(7363)),o=n(134),i=n(9268);function l(e,t,n,a){e=e.replace("+",".5");const r=new URLSearchParams;r.set("maxLevelValue",e),r.set("minLevelValue",e),1===t&&r.set("region","jp"),0===t&&r.set("region","intl");const i=[];for(;n<=a;)i.push((0,o.getVersionName)(n)),n++;return r.set("versions",i.join("|")),"https://arcade-songs.zetaraku.dev/maimai/?"+r}class s extends r.default.PureComponent{render(){const{gameRegion:e,gameVer:t,lv:n,includeOldVersions:a}=this.props;if(n<0)return r.default.createElement("td",null,"--");const o=(0,i.getOfficialLevel)(n);return r.default.createElement("td",null,r.default.createElement("a",{href:l(o,e,a?0:t,t),target:"_blank"},o),r.default.createElement("br",null),"(",n.toFixed(1),"~)")}}t.RecommendedLevelCell=s},2953:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendedLevels=void 0;const r=a(n(7363)),o=n(5215),i=n(6358),l=n(7991),s=n(1698),c={en_US:{recommendedLevels:"Recommended levels",projectedRating:"Potential Rating",newChartsRecLv:"New Charts",oldChartsRecLv:"Old Charts",levelComment:"Note: X.7 and above is classified under X+. For example, 10.7, 10.8, and 10.9 are 10+."},zh_TW:{recommendedLevels:"刷分目標 (推薦等級)",projectedRating:"可獲得 R 值",newChartsRecLv:"新譜面",oldChartsRecLv:"舊譜面",levelComment:"註：X.7 以上是歸類在官方的 X+。舉例來說：10.7, 10.8, 10.9 都算是 10+。"}};function u(e,t){return(0,i.roundFloat)(e/t.factor/t.minAchv*100,"ceil",.1)}t.RecommendedLevels=({gameRegion:e,gameVer:t,newChartsRating:n,newTopChartsCount:a,oldChartsRating:i,oldTopChartsCount:d})=>{const f=c[(0,o.useLanguage)()];let m=(0,l.getRankDefinitions)(t);const g=m.findIndex((e=>"SS"===e.title));m=m.slice(0,g+1).filter(((e,t,n)=>t===n.length-1||e.title!==n[t+1].title));const h=a>0?Math.floor(n/a):0,p=d>0?Math.floor(i/d):0,v=m.map((e=>{const t=u(h,e);return t>15?-1:t})),_=m.map((e=>{const t=u(p,e);return t>15?-1:t}));return r.default.createElement("div",{className:"recLvSection"},r.default.createElement("h3",{className:"recLvTitle"},f.recommendedLevels),r.default.createElement("table",{className:"recLvTable"},r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("th",{className:"recLvFirstCol"}),m.map((e=>r.default.createElement("th",null,r.default.createElement("span",{className:"recLvRankTitle"},e.title),r.default.createElement("span",{className:"recLvRankAchv"},e.minAchv,"%")))),r.default.createElement("th",null,f.projectedRating))),r.default.createElement("tbody",null,h>0&&r.default.createElement("tr",null,r.default.createElement("th",{className:"recLvFirstCol"},f.newChartsRecLv),v.map((n=>r.default.createElement(s.RecommendedLevelCell,{gameRegion:e,gameVer:t,lv:n}))),r.default.createElement("td",null,Math.floor(h),"↑")),p>0&&r.default.createElement("tr",null,r.default.createElement("th",{className:"recLvFirstCol"},f.oldChartsRecLv),_.map((n=>r.default.createElement(s.RecommendedLevelCell,{gameRegion:e,gameVer:t-1,includeOldVersions:!0,lv:n}))),r.default.createElement("td",null,Math.floor(p),"↑")))),r.default.createElement("p",{className:"recLvDesc"},f.levelComment))}},9606:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=void 0;const o=r(n(7363)),i=n(134),l=n(8080),s=n(5215),c=n(6685),u=n(87),d=n(2411),f=n(715),m=n(7258),g=n(3531),h=n(8169),p=n(6014),v=n(3462),_=n(2693),C=n(9401),y=n(6492),R={en_US:{computeRating:"Calculate Rating"},zh_TW:{computeRating:"計算 Rating 值"}};class S extends o.default.PureComponent{constructor(e){super(e),this.playerGradeIndex=0,this.internalLvTextarea=o.default.createRef(),this.scoreTextarea=o.default.createRef(),this.referrer=document.referrer&&new URL(document.referrer).origin,this.changeLanguage=e=>{this.setState({lang:e}),(0,l.saveLanguage)(e),this.postMessageToOpener({action:"saveLanguage",payload:e})},this.selectVersion=e=>{this.setState({gameVer:e},this.analyzeRating)},this.analyzeRating=e=>a(this,void 0,void 0,(function*(){e&&e.preventDefault();const t=this.getInternalLvInput(),n=this.getScoreInput(),{gameVer:r,gameRegion:o}=this.state;console.log("gameVer",r);const i=yield function(e,t){return new Promise((n=>{if(t.length>0)return void n((0,u.buildSongPropsMap)(t));const a=(0,d.readFromCache)(e);a?n((0,u.buildSongPropsMap)(a)):(console.log("Magic happening..."),(0,c.iWantSomeMagic)(e).then((t=>{t.startsWith("<!DOCTYPE html>")||(0,d.writeToCache)(e,t),n((0,u.buildSongPropsMap)(t))})))}))}(r,t);console.log("Song properties:",i);const l=yield function(e){return a(this,void 0,void 0,(function*(){const t=e.split("\n"),n=[];for(const e of t){const t=(0,f.parseScoreLine)(e);t&&n.push(t)}return n}))}(n);if(console.log("Player scores:",l),!l.length)return void this.setState({ratingData:void 0});const s=yield(0,m.analyzePlayerRating)(i,l,r,o);console.log("Rating Data:",s),this.setState({ratingData:s,songPropsByName:i})}));const t=new URLSearchParams(location.search),n=t.get("gameVersion"),r=(0,i.validateGameVersion)(n),s=t.get("friendIdx"),g=t.get("playerName"),h=(0,l.getInitialLanguage)();b(h),this.state={lang:h,gameRegion:1,gameVer:r,friendIdx:s,playerName:g},window.opener&&this.initWindowCommunication()}componentDidUpdate(e,t){!this.state.songPropsByName||(this.state.oldSongs||this.state.newSongs)&&t.gameVer===this.state.gameVer||this.loadSongLists(this.state.gameVer),this.state.lang!=t.lang&&b(this.state.lang)}render(){const{lang:e,gameRegion:t,gameVer:n,playerName:a,ratingData:r,songPropsByName:i,oldSongs:l,newSongs:c}=this.state,u=R[e];return o.default.createElement(s.LangContext.Provider,{value:e},o.default.createElement(h.LanguageChooser,{activeLanguage:e,changeLanguage:this.changeLanguage}),o.default.createElement("br",null),o.default.createElement("br",null),o.default.createElement(y.VersionSelect,{gameVer:n,handleVersionSelect:this.selectVersion}),o.default.createElement(g.InternalLvInput,{ref:this.internalLvTextarea}),o.default.createElement(C.ScoreInput,{ref:this.scoreTextarea}),o.default.createElement("div",{className:"actionArea"},o.default.createElement("button",{className:"analyzeRatingBtn",onClick:this.analyzeRating},u.computeRating)),o.default.createElement("hr",{className:"sectionSep"}),r&&o.default.createElement(_.RatingOutput,{gameRegion:t,gameVer:n,songPropsByName:i,ratingData:r,playerGradeIndex:this.playerGradeIndex,playerName:a,oldSongs:l,newSongs:c}),o.default.createElement(v.PageFooter,null),o.default.createElement(p.OtherTools,{gameVer:n}))}postMessageToOpener(e){window.opener&&(this.referrer?window.opener.postMessage(e,this.referrer):(window.opener.postMessage(e,"https://maimaidx-eng.com"),window.opener.postMessage(e,"https://maimaidx.jp")))}initWindowCommunication(){window.addEventListener("message",(e=>{if("https://maimaidx-eng.com"===e.origin||"https://maimaidx.jp"===e.origin){let t;switch(console.log(e.origin,e.data.action,function({action:e,payload:t}){return"appendPlayerScore"===e?"string of length "+t.length:t}(e.data)),e.data.action){case"gameVersion":this.setState({gameRegion:"https://maimaidx.jp"===e.origin?1:0,gameVer:(0,i.validateGameVersion)(e.data.payload)});break;case"playerGrade":t=parseInt(e.data.payload),t&&(this.playerGradeIndex=t);break;case"replacePlayerScore":this.setScoreText(e.data.payload);break;case"appendPlayerScore":this.appendScoreText(e.data.payload);break;case"calculateRating":this.analyzeRating();break;case"allSongs":this.setState({oldSongs:(0,u.filterSongsByVersion)(e.data.payload,this.state.songPropsByName,this.state.gameVer,1)});break;case"newSongs":e.data.payload.length?this.setState({newSongs:(0,u.filterSongsByVersion)(e.data.payload,this.state.songPropsByName,this.state.gameVer,0)}):this.setState({newSongs:(0,u.getSongsByVersion)(this.state.songPropsByName,this.state.gameVer)})}}}));const{friendIdx:e,lang:t}=this.state;e?this.postMessageToOpener({action:"getFriendRecords",payload:e}):this.postMessageToOpener({action:"ready",payload:t})}loadSongLists(e){this.postMessageToOpener({action:"fetchAllSongs"}),this.postMessageToOpener({action:"fetchNewSongs",payload:e})}getInternalLvInput(){return this.internalLvTextarea.current?this.internalLvTextarea.current.value:""}getScoreInput(){return this.scoreTextarea.current?this.scoreTextarea.current.value:""}setScoreText(e){this.scoreTextarea.current&&(this.scoreTextarea.current.value=e)}appendScoreText(e){this.scoreTextarea.current&&(this.scoreTextarea.current.value+=e)}}function b(e){switch(e){case"en_US":document.title="maimai DX Rating Analyzer";break;case"zh_TW":document.title="maimai DX R 值分析工具"}}t.RootComponent=S},9401:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreInput=void 0;const r=a(n(7363)),o=n(5215),i={en_US:{scoreInputHeading:"Player Scores",scoreInputDescPrefix:'Please use "Analyze Self DX Rating" or "Analyze Friend\'s DX Rating" from ',bookmarketLinkLabel:"maimai bookmarklets",scoreInputDescSuffix:" to fill in this field."},zh_TW:{scoreInputHeading:"玩家成績輸入",scoreInputDescPrefix:"請用 ",bookmarketLinkLabel:"maimai 書籤小工具",scoreInputDescSuffix:" 中的「分析自己 DX Rating」或「分析好友 DX Rating」填入此欄。"}};t.ScoreInput=r.default.forwardRef(((e,t)=>{const n=i[(0,o.useLanguage)()];return r.default.createElement("div",{className:"w90"},r.default.createElement("h2",{className:"scoreInputHeading"},n.scoreInputHeading),r.default.createElement("div",null,n.scoreInputDescPrefix,r.default.createElement("a",{href:"../#bookmarklets",target:"_blank"},n.bookmarketLinkLabel),n.scoreInputDescSuffix),r.default.createElement("textarea",{className:"scoreInputArea",ref:t}))}))},33:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TopChartRecords=void 0;const i=o(n(7363)),l=n(5215),s=n(8906),c=n(8505),u=n(4961),d=n(7340),f=n(2186),m=n(7247),g=[0,1,2,3,4,5,7],h=new Map([[1,c.compareSongsByName],[2,c.compareSongsByDifficulty],[3,c.compareSongsByLevel],[4,c.compareSongsByAchv],[5,c.compareSongsByAchv],[7,c.compareSongsByRating]]);t.TopChartRecords=({hidden:e,records:t,limit:n,songPropsByName:a})=>{const[r,o]=(0,i.useState)(7),[c,p]=(0,i.useState)(!1),v=(0,i.useCallback)((e=>{h.has(e)?e===r?p(!c):(o(e),p(!1)):o(void 0)}),[r,c]);let _=t.slice(0,n);_.forEach(((e,t)=>e.order=t+1)),r&&(_.sort(h.get(r)),c&&_.reverse());const C=(0,l.useLanguage)();return i.default.createElement(d.CollapsibleContainer,{className:"songRecordTableContainer",hidden:e},i.default.createElement("div",{className:"responsiveFlexBox"},i.default.createElement(m.LevelRankDistribution,{topLeftCell:s.CommonMessages[C].level,chartRecords:_,topChartsCount:n}),i.default.createElement(f.DifficultyDistribution,{chartRecords:_,topChartsCount:n})),i.default.createElement(u.ChartRecordsTable,{songPropsByName:a,columns:g,tableClassname:"topRecordTable",records:_,sortBy:v}))}},6492:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VersionSelect=void 0;const i=o(n(7363)),l=n(134),s=n(5215),c={en_US:{gameVer:"Game version:"},zh_TW:{gameVer:"遊戲版本："}};t.VersionSelect=({gameVer:e,handleVersionSelect:t})=>{const n=(0,i.useCallback)((e=>{t(parseInt(e.currentTarget.value))}),[t]),a=c[(0,s.useLanguage)()];return i.default.createElement("label",null,a.gameVer,i.default.createElement("select",{className:"gameVersion",onChange:n,value:e},l.RATING_CALCULATOR_SUPPORTED_VERSIONS.map((e=>{const t=e.toFixed(0);return i.default.createElement("option",{key:t,value:t},(0,l.getVersionName)(e))}))))}},5945:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTopGradeBonus=t.getGradeByIndex=void 0;const n=[{title:"",bonus:0},{title:"初心者",bonus:0},{title:"見習い",bonus:250},{title:"駆け出し",bonus:500},{title:"修行中",bonus:750},{title:"初段",bonus:1e3},{title:"二段",bonus:1200},{title:"三段",bonus:1400},{title:"四段",bonus:1500},{title:"五段",bonus:1600},{title:"六段",bonus:1700},{title:"七段",bonus:1800},{title:"八段",bonus:1850},{title:"九段",bonus:1900},{title:"十段",bonus:1950},{title:"皆伝",bonus:2e3},{title:"壱皆伝",bonus:2010},{title:"弐皆伝",bonus:2020},{title:"参皆伝",bonus:2030},{title:"肆皆伝",bonus:2040},{title:"伍皆伝",bonus:2050},{title:"陸皆伝",bonus:2060},{title:"漆皆伝",bonus:2070},{title:"捌皆伝",bonus:2080},{title:"玖皆伝",bonus:2090},{title:"拾皆伝",bonus:2100}];t.getGradeByIndex=function(e){return n[e]},t.getTopGradeBonus=function(e){return e>15?0:n[n.length-1].bonus}},5869:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(7363)),o=a(n(745)),i=n(9606);o.default.createRoot(document.getElementById("root")).render(r.default.createElement(i.RootComponent))},715:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseScoreLine=void 0;const a=n(9268);t.parseScoreLine=function(e){const[t,n,r,o,i,l]=e.split("\t");if(t&&n&&r&&o&&i&&l){const e=parseFloat(l);return{songName:t,genre:n,difficulty:r,level:(0,a.getDefaultLevel)(o),levelIsEstimate:!0,chartType:"DX"===i?1:0,achievement:e}}}},2060:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRankMap=t.getRankDistribution=void 0;const a=n(7991);function r(e){const t=(0,a.getRankDefinitions)(15),n=new Map;for(const e of t)n.set(e.title,0);return e.forEach((e=>{const t=(0,a.getRankTitle)(e.achievement),r=n.get(t);n.set(t,r+1)})),n}t.getRankDistribution=r,t.getRankMap=function(e){const t=r(e),n=new Map;let a=e.length;for(const[e,r]of t)a>0&&n.set(e,!0),a-=r;return n}},7258:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.analyzePlayerRating=t.analyzeSongRating=t.getNumOfTopOldCharts=t.getNumOfTopNewCharts=void 0;const r=n(8379),o=n(7991),i=n(87),l=n(8505),s=n(3863);function c(e,t){e=Math.min(e,r.SSSPLUS_MIN_ACHIEVEMENT);const n=(0,o.getRankByAchievement)(e,t);return n||console.warn(`Could not find rank for achievement ${e.toFixed(4)}%`),(n?n.factor:5)*e/100}function u(e){return e>15?35:25}function d(e,t,n){if(n){const e=r.DIFFICULTIES.indexOf(t.difficulty),a=n.lv[e];"number"==typeof a&&(t.levelIsEstimate=a<0,t.level=Math.abs(a))}return Object.assign(Object.assign({},t),{rating:t.level*c(t.achievement,e)})}t.getNumOfTopNewCharts=function(){return 15},t.getNumOfTopOldCharts=u,t.analyzeSongRating=d,t.analyzePlayerRating=function(e,t,n,r){return a(this,void 0,void 0,(function*(){const a=[],o=[],c=(0,s.getRemovedSongsByVersion)(n,r);for(const r of t){if(c.includes(r.songName))continue;const t=(0,i.getSongProperties)(e,r.songName,r.genre,r.chartType),l=t?t.debut===n:1===r.chartType,s=d(n,r,t);l?a.push(s):o.push(s)}a.sort(l.compareSongsByRating),o.sort(l.compareSongsByRating);let f=0;const m=Math.min(15,a.length);for(let e=0;e<m;e++){const t=a[e];t.isTarget=!0,f+=Math.floor(t.rating)}let g=0;const h=Math.min(u(n),o.length);for(let e=0;e<h;e++){const t=o[e];t.isTarget=!0,g+=Math.floor(t.rating)}return{newChartRecords:a,newChartsRating:f,newTopChartsCount:m,oldChartRecords:o,oldChartsRating:g,oldTopChartsCount:h}}))}},7284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateMaxRating=t.calculateRatingRange=void 0;const a=n(6358),r=n(7991);t.calculateRatingRange=function(e,t,n){const a=(0,r.getRankDefinitions)(e),o=a.indexOf(n),i=o>=1?a[o-1].minAchv-1e-4:n.minAchv;return[Math.floor(t*n.minAchv*n.factor/100),Math.floor(t*i*n.factor/100)]},t.calculateMaxRating=function(e,t,n){let o=[];for(const e of t)o=o.concat(e.lv.filter((e=>"number"==typeof e)).map((e=>Math.abs(e))));o.sort(a.compareNumber);const i=o.slice(Math.max(0,o.length-n)),l=(0,r.getRankDefinitions)(e)[0];let s=0;for(const e of i)s+=Math.floor(e*l.minAchv*l.factor/100);return s}},8505:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compareSongsByDifficulty=t.compareSongsByNextRank=t.compareSongsByName=t.compareSongsByAchv=t.compareSongsByLevel=t.compareSongsByNextRating=t.compareCandidate=t.compareSongsByRating=void 0;const a=n(8379);function r(e,t){return e>t?-1:Number(e<t)}function o(e,t,n){return r(e[n],t[n])}t.compareSongsByRating=function(e,t){return o(e,t,"rating")||o(e,t,"level")||o(e,t,"achievement")},t.compareCandidate=function(e,t){const n=e.nextRanks.values().next().value,a=n.minRt/(n.rank.minAchv-e.achievement),i=t.nextRanks.values().next().value;return r(a,i.minRt/(i.rank.minAchv-t.achievement))||r(n.minRt,i.minRt)||o(e,t,"level")},t.compareSongsByNextRating=function(e,t){const n=e.nextRanks.values().next().value,a=t.nextRanks.values().next().value;return r(n.minRt,a.minRt)||o(e,t,"level")},t.compareSongsByLevel=function(e,t){return o(t,e,"level")},t.compareSongsByAchv=function(e,t){return o(e,t,"achievement")},t.compareSongsByName=function(e,t){return n=t,e["songName"].localeCompare(n.songName);var n},t.compareSongsByNextRank=function(e,t){const n=e.nextRanks.values().next().value.rank,a=t.nextRanks.values().next().value.rank;return r(n.minAchv,a.minAchv)},t.compareSongsByDifficulty=function(e,t){return r(a.DIFFICULTIES.indexOf(e.difficulty),a.DIFFICULTIES.indexOf(t.difficulty))}},3863:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRemovedSongsByVersion=void 0,t.getRemovedSongsByVersion=function(e,t){return 0===t&&17===e?["コネクト","シュガーソングとビターステップ","Mr. Wonderland","ワンダーラスト","LOSER","U.S.A.","新宝島","アウトサイダー","ジャガーノート"]:[]}},7363:e=>{e.exports=React},1533:e=>{e.exports=ReactDOM}},t={};!function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}(5869)})();